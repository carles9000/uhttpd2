export function k_Datatable(e,n,t,o=!1){t.ajax=n,$("#"+e).DataTable(t),o&&$("#"+e).on("xhr.dt",function(e,n,t,o){console.log(t)})}function __get(e,n){Formio.fetch(n.onload+n.params,{headers:{"content-type":"application/json"},mode:"cors"}).then(e=>e.json()).then(n=>{console.log(n),e.submission={data:n.data}})}function __send(e,n,t){Formio.fetch(n,{body:JSON.stringify(t),headers:{"content-type":"application/json"},method:"POST",mode:"cors"}).then(function(n){return e.emit("submitDone"),n.json()}).then(e=>{console.log(e),alert(e.message)})}export function k_Formio(e,n,t={design:!1}){window.onload=function(){let o=document.getElementById(e);Formio.icons="fontawesome",t.design?k_FormioBuilder(o,n,t):Formio.createForm(o,location.origin+"/"+n).then(n=>{n.nosubmit=!0,UInitDialog(e),n.on("submit",e=>__send(n,t.onsend,e.data)),t.onload&&n.on("render",e=>__get(n,t))})}}function __CreateButton(e){let n=document.createElement("H3");n.innerHTML=`
      <img src="files/uhttpd2/images/rw.png" height="50px">
      Workshop builder
      <button id="save" class="btn btn-link float-right">Guardar formulario</button>
   `;let t=e.closest("div.container");t.insertBefore(n,t.firstChild)}function k_FormioBuilder(e,n,t){let o=new Formio(location.origin+"/"+n),i;o.loadForm().then(n=>{Formio.builder(e,n).then(e=>{i=e})}),__CreateButton(e),document.querySelector("#save").onclick=function(e){e.preventDefault(),t.hasOwnProperty("onsave")||""!==t.onsave?fetch(location.origin+"/"+t.onsave,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(i.schema)}).then(e=>e.json()).then(e=>alert(e.message)):console.log("fn onsave no informada")}}